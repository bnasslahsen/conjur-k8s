### KUBE/OCP Setup ###
KUBECONFIG=$HOME/.microshift/config
USE_K8S_FOLLOWER=true
USE_SYNCHRONIZER=false
IS_OCP=false
CYBERARK_CONJUR_REGISTRY=nexus.demo.cybr:8088
INTERNAL_REGISTRY=docker.io
INTERNAL_REGISTRY_PREFIX=$INTERNAL_REGISTRY/bnasslahsen

### Conjur Setup ###
CYBERARK_CONJUR_NAMESPACE=bnl-cyberark-conjur
CYBERARK_CONJUR_ACCOUNT=devsecops
CYBERARK_CONJUR_MASTER_HOSTNAME=ip-10-0-20-225.eu-west-2.compute.internal
CYBERARK_CONJUR_MASTER_PORT=3000
CYBERARK_CONJUR_AUTHENTICATOR_ID=dev-cluster
## Valid with 12.4
#FOLLOWER_VERSION=2.0.0
## Valid with 12.7
FOLLOWER_VERSION=2.2.1-11

### Common App Setup ###
APP_NAMESPACE=bnl-test-app-namespace
APP_SERVICE_ACCOUNT_NAME=test-app-sa
APP_NAME=test-app
APP_HOST_ID=host/$APP_NAME

# Change these is optional
CYBERARK_CONJUR_AUTH_K8S_CONTAINER_NAME=configurator
CYBERARK_CONJUR_SERVICE_ACCOUNT_NAME=authn-k8s-sa
CYBERARK_CONJUR_APPLIANCE_URL=https://${CYBERARK_CONJUR_MASTER_HOSTNAME}
CYBERARK_CONJUR_SEED_FILE_URL=$CYBERARK_CONJUR_APPLIANCE_URL/configuration/$CYBERARK_CONJUR_ACCOUNT/seed/follower
CYBERARK_CONJUR_SSL_CERTIFICATE=conjur.pem
CYBERARK_CONJUR_CERT_PATH=/etc/conjur/ssl
CYBERARK_CONJUR_CERT_FILE="$CYBERARK_CONJUR_CERT_PATH/$CYBERARK_CONJUR_SSL_CERTIFICATE"
CYBERARK_CONJUR_CLUSTER_ROLE_NAME=conjur-clusterrole
CYBERARK_CONJUR_K8S_INFO="kube-info.txt"

### Follower Setup ###
FOLLOWER_NAME=k8s-follower
FOLLOWER_SERVICE_NAME=conjur-follower
FOLLOWER_HOST_ID=host/$FOLLOWER_NAME
FOLLOWER_SERVICE_ACCOUNT_NAME=conjur-follower
FOLLOWER_OPERATOR_IMAGE=$CYBERARK_CONJUR_REGISTRY/cyberark/conjur-kubernetes-follower-operator
FOLLOWER_CONFIGURATOR_IMAGE=$CYBERARK_CONJUR_REGISTRY/cyberark/conjur-kubernetes-follower-configurator:$FOLLOWER_VERSION
FOLLOWER_CYBERARK_CONJUR_IMAGE=$CYBERARK_CONJUR_REGISTRY/cyberark/conjur-kubernetes-follower-conjur:$FOLLOWER_VERSION
FOLLOWER_INFO_IMAGE=$CYBERARK_CONJUR_REGISTRY/cyberark/conjur-kubernetes-follower-info:$FOLLOWER_VERSION
FOLLOWER_NGINX_IMAGE=$CYBERARK_CONJUR_REGISTRY/cyberark/conjur-kubernetes-follower-nginx:$FOLLOWER_VERSION
FOLLOWER_POSTGRES_IMAGE=$CYBERARK_CONJUR_REGISTRY/cyberark/conjur-kubernetes-follower-postgres:$FOLLOWER_VERSION
FOLLOWER_SYSLOG_IMAGE=$CYBERARK_CONJUR_REGISTRY/cyberark/conjur-kubernetes-follower-syslog-ng:$FOLLOWER_VERSION

### Basic App Setup ###
APP_IMAGE_NAME_BASIC=$INTERNAL_REGISTRY_PREFIX/conjur-k8s-demo

### MongoDB Basic App Setup ###
APP_IMAGE_NAME_BASIC_MONGODB=$INTERNAL_REGISTRY_PREFIX/conjur-k8s-mongodb
APP_IMAGE_NAME_SUMMON_MONGODB=$INTERNAL_REGISTRY_PREFIX/conjur-k8s-mongodb-summon-demo
APP_NAME_BASIC_MONGODB=test-app-basic-mongodb
APP_DB_NAME_MONGODB=test-db-mongodb
MONGO_INITDB_ROOT_USERNAME=test
MONGO_INITDB_ROOT_PASSWORD=5b3e5f75cb3cdc725fe40356
APP_MONGO_SUMMON_SIDECAR=test-app-summon-mongodb-sidecar
APP_MONGO_HOST_URI=secrets/$APP_NAME/mongo-uri
APP_MONGO_URI=mongodb://$MONGO_INITDB_ROOT_USERNAME:$MONGO_INITDB_ROOT_PASSWORD@test-db-mongodb.$APP_NAMESPACE.svc.cluster.local:27017/admin
APP_MONGO_PUSH_FILE_SIDECAR=test-app-push-to-file-mongodb-sidecar
APP_MONGO_PUSH_FILE_REFRESH_SIDECAR=test-app-push-to-file-refresh-mongodb-sidecar

### Secrets provider k8s App Setup ###
APP_SECRETS_K8S_INIT=test-app-secrets-provider-k8s-init
APP_SECRETS_K8S_SIDECAR=test-app-secrets-provider-k8s-sidecar

### Summon App Setup ###
APP_SUMMON_INIT=test-app-summon-init
APP_SUMMON_SIDECAR=test-app-summon-sidecar
APP_SUMMON_INIT_NOCHANGE=test-app-summon-init-nochange
APP_IMAGE_NAME_SUMMON=$INTERNAL_REGISTRY_PREFIX/conjur-summon-k8s-demo

### SIDECAR INJECTOR  ###
APP_SIDECAR_INJECTOR_SUMMON_INIT=test-app-sidecar-injector-summon-init
APP_SIDECAR_INJECTOR_SUMMON_SIDECAR=test-app-sidecar-injector-summon-sidecar
APP_SIDECAR_INJECTOR_SECRETS_K8S_INIT=test-app-sidecar-injector-secrets-provider-k8s-init

### Push To File App Setup ###
APP_PUSH_FILE_SIDECAR=test-app-push-to-file-sidecar
APP_IMAGE_NAME_APP_PUSH_FILE=$INTERNAL_REGISTRY_PREFIX/conjur-summon-k8s-demo

### Java APP Setup ###
APP_JAVA_SDK=test-app-java-sdk
APP_JAVA_SDK_JWT=test-app-java-sdk-jwt
APP_IMAGE_NAME_JAVA_SDK=$INTERNAL_REGISTRY_PREFIX/conjur-java-sdk-demo
CYBERARK_CONJUR_AUTHN_API_KEY=304dwk32tzzn4rjb6cv12an6d7w134js1c3jm4tjrs7jqqy3e4qwcg
CYBERARK_CONJUR_AUTHN_LOGIN=$APP_HOST_ID
CYBERARK_CONJUR_JWT_TOKEN_PATH=/var/run/secrets/kubernetes.io/serviceaccount/token

### SpringBoot App Setup ###
APP_SPRINGBOOT=test-app-springboot
APP_IMAGE_NAME_SPRINGBOOT=$INTERNAL_REGISTRY_PREFIX/conjur-springboot-k8s-demo

### Secretless App Setup ###
APP_NAME_SECRETLESS=test-app-secretless
APP_IMAGE_NAME_SECRETLESS=$INTERNAL_REGISTRY_PREFIX/conjur-secretless-k8s-demo
APP_DB_NAME_POSTGRESQL=test-db
APP_POSTGRESQL_DB=test_db
APP_POSTGRESQL_USER=test_db
APP_POSTGRESQL_PASSWORD=5b3e5f75cb3cdc725fe40318

### Secretless MySQL App Setup ###
APP_NAME_SECRETLESS_MYSQL=test-app-secretless-mysql
APP_IMAGE_NAME_SECRETLESS_MYSQL=$INTERNAL_REGISTRY_PREFIX/conjur-secretless-k8s-demo-mysql
APP_DB_NAME_MYSQL=test-db-mysql
APP_MYSQL_DB=test_db
APP_MYSQL_USER=test_db
APP_MYSQL_PASSWORD=5b3e5f75cb3cdc725fe40318
APP_MYSQL_ROOT_PASSWORD=rootPass

### Secret policies PATH ###
APP_SECRET_USERNAME_PATH=secrets/$APP_NAME/username
APP_SECRET_PASSWORD_PATH=secrets/$APP_NAME/password
APP_SECRET_URL_PATH=secrets/$APP_NAME/url
APP_SECRETLESS_DB_HOST_PATH=secrets/$APP_NAME/host-postgres
APP_SECRETLESS_DB_PORT_PATH=secrets/$APP_NAME/port-postgres
APP_SECRETLESS_DB_USERNAME_PATH=secrets/$APP_NAME/username-postgres
APP_SECRETLESS_DB_PASSWORD_PATH=secrets/$APP_NAME/password-postgres
APP_SECRETLESS_DB_MYSQL_HOST_PATH=secrets/$APP_NAME/host-mysql
APP_SECRETLESS_DB_MYSQL_PORT_PATH=secrets/$APP_NAME/port-mysql
APP_SECRETLESS_DB_MYSQL_USERNAME_PATH=secrets/$APP_NAME/username-mysql
APP_SECRETLESS_DB_MYSQL_PASSWORD_PATH=secrets/$APP_NAME/password-mysql

## Client Images ###
SECRETLESS_BROKER_IMAGE=$INTERNAL_REGISTRY/cyberark/secretless-broker
SECRETS_PROVIDER_IMAGE=$INTERNAL_REGISTRY/cyberark/secrets-provider-for-k8s
CYBERARK_CONJUR_AUTHN_K8S_IMAGE=$INTERNAL_REGISTRY/cyberark/conjur-authn-k8s-client

if "$IS_OCP" ; then
    KUBE_CLI=oc
    KUBE_PLATFORM=ocp
else
    KUBE_CLI=kubectl
    KUBE_PLATFORM=k8s
fi